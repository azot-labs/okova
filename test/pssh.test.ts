import { createPssh } from '@@/src/lib/widevine/pssh';
import { expect, test } from 'vitest';

const PSSH_WV_PR =
  'AAAAbHBzc2gAAAAA7e+LqXnWSs6jyCfc1R0h7QAAAEwIARIgYjY3Yjg4Y2U1MWI1MzVlZjljOTEwNTg3N2MxZjA2MGUaBHlvdGEiIDc2ZGE1NTk4YmRlNzM2NDBhNWYxZWRmZWE5MWVjM2I1AAACtHBzc2gAAAAAmgTweZhAQoarkuZb4IhflQAAApSUAgAAAQABAIoCPABXAFIATQBIAEUAQQBEAEUAUgAgAHgAbQBsAG4AcwA9ACIAaAB0AHQAcAA6AC8ALwBzAGMAaABlAG0AYQBzAC4AbQBpAGMAcgBvAHMAbwBmAHQALgBjAG8AbQAvAEQAUgBNAC8AMgAwADAANwAvADAAMwAvAFAAbABhAHkAUgBlAGEAZAB5AEgAZQBhAGQAZQByACIAIAB2AGUAcgBzAGkAbwBuAD0AIgA0AC4AMAAuADAALgAwACIAPgA8AEQAQQBUAEEAPgA8AFAAUgBPAFQARQBDAFQASQBOAEYATwA+ADwASwBFAFkATABFAE4APgAxADYAPAAvAEsARQBZAEwARQBOAD4APABBAEwARwBJAEQAPgBBAEUAUwBDAFQAUgA8AC8AQQBMAEcASQBEAD4APAAvAFAAUgBPAFQARQBDAFQASQBOAEYATwA+ADwASwBJAEQAPgB6AG8AaAA3AHQAcgBWAFIANwB6AFcAYwBrAFEAVwBIAGYAQgA4AEcARABnAD0APQA8AC8ASwBJAEQAPgA8AEMASABFAEMASwBTAFUATQA+AFIAbQBkAEEAbgBvADYAcAA3AEkAOAA9ADwALwBDAEgARQBDAEsAUwBVAE0APgA8AEwAQQBfAFUAUgBMAD4AaAB0AHQAcABzADoALwAvAGQAcgBtAC4AcABsAGEAeQBmAGEAbQBpAGwAeQAuAHIAdQAvAHAAbABhAHkAcgBlAGEAZAB5AC8AcgBpAGcAaAB0AHMAbQBhAG4AYQBnAGUAcgAuAGEAcwBtAHgAPAAvAEwAQQBfAFUAUgBMAD4APAAvAEQAQQBUAEEAPgA8AC8AVwBSAE0ASABFAEEARABFAFIAPgA=';

test('parsing widevine pssh with playready pssh included', () => {
  const pssh = createPssh(PSSH_WV_PR);
  expect(pssh.data.provider).toBe('yota');
});
